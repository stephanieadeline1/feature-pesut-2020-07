{"version":3,"sources":["webpack:///./app/scripts/packs/mapscroll.js","webpack:///./config/modern-polyfills.js"],"names":["config","style","accessToken","showMarkers","theme","alignment","title","subtitle","byline","footer","chapters","id","description","location","center","zoom","pitch","bearing","onChapterEnter","layer","opacity","onChapterExit","svg","layerTypes","fill","line","circle","symbol","raster","setLayerOpacity","layerType","map","getLayer","type","getLayerPaintType","forEach","prop","setPaintProperty","story","document","getElementById","features","createElement","classList","add","left","right","setAttribute","header","titleText","innerText","appendChild","subtitleText","bylineText","length","record","idx","container","chapter","image","Image","src","innerHTML","chart","footerText","mapboxgl","Map","scrollZoom","transformRequest","url","hasQuery","indexOf","marker","Marker","setLngLat","addTo","scroller","scrollama","on","setup","step","offset","progress","onStepEnter","response","find","chap","element","flyTo","onStepExit","remove","window","addEventListener","resize","require"],"mappings":"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","file":"mapscroll.4df50114ce.mjs","sourcesContent":["import 'intersection-observer';\nimport scrollama from 'scrollama'; // or...\nvar config = {\n  style: 'mapbox://styles/stephadeline/ckcehbxzy0xrs1io40zhrwwd7/draft',\n  accessToken:\n    'pk.eyJ1Ijoic3RlcGhhZGVsaW5lIiwiYSI6ImNrY2U4a3Q0cDA1dXUzN281ZzRuanB0MmIifQ.KshV869EVdqe2C-Ifyb9qg',\n  showMarkers: false,\n  theme: 'dark',\n  alignment: 'right',\n  title: \"Threats to Indonesia's Irawaddy Dolphin Population\",\n  subtitle: '',\n  byline: '',\n  footer: '',\n  chapters: [\n    {\n      id: 'both-intro',\n      title: '',\n      // image: './path/to/image/source.png',\n      description:\n        'Irrawaddy dolphins in East Kalimantan inhabit two large waters: Balikpapan Bay and the Mahakam River.',\n      location: {\n        center: [116.84909, -0.8],\n        zoom: 8,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'telukbppnew',\n          opacity: 1,\n        },\n        {\n          layer: 'mahakamair',\n          opacity: 1,\n        },\n        {\n          layer: 'mahakam1819',\n          opacity: 0,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'telukbppnew',\n          opacity: 0,\n        },\n        {\n          layer: 'mahakamair',\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: 'section-intro',\n      title: 'Balikpapan Bay',\n      description:\n        'Balikpapan Bay occupies an area that spans out over 160 square kilometers. Tobacco plants inhabit its coastline.',\n      location: {\n        center: [116.84909, -1.14256],\n        zoom: 9,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'mahakam1819',\n          opacity: 0,\n        },\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 0,\n        },\n        {\n          layer: 'telukbppnew',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'telukbppnew',\n          opacity: 0,\n        },\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: 'section-1',\n      title: '',\n      // image: './path/to/image/source.png',\n      description:\n        'According to research done by the conservation organization <a href=\"https://www.ykrasi.org/\">Rare Aquatic Species of Indonesia (RASI)</a>, four species of marine mammals -- the Irrawaddy dolphin, bottle-nose dolphin, finless porpoise and dugong -- as well as crocodiles and turtles call Balikpapan Bay home.',\n      svg: true,\n      location: {\n        center: [116.84909, -1.14256],\n        zoom: 9,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'allbpp',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'allbpp',\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: 'section-1a',\n      title: '',\n      // image: './path/to/image/source.png',\n      description:\n        '“Of the four species of marine mammals, the most prominent is the Irrawaddy dolphin, with a total population of 71 in 2015,” RASI researcher Danielle Kreb said.',\n      location: {\n        center: [116.84909, -1.14256],\n        zoom: 9.98,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n      ],\n    },\n    {\n      id: 'section-2',\n      title: 'Migration from downstream to upstream',\n      // image: './path/to/image/source.png',\n      description:\n        'Starting in 2000-2001, however, Irrawaddy dolphins that inhabited the downstream area of the bay have migrated to the river source due to threats to its habitat.<br/><br/>One of the biggest threats is ship traffic.',\n      svg: true,\n      location: {\n        center: [116.84909, -1.14256],\n        zoom: 9.98,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n\n        {\n          layer: 'orcaella-2001',\n          opacity: 1,\n        },\n        {\n          layer: 'orcaella-2008',\n          opacity: 1,\n        },\n        {\n          layer: 'orcaella-2011',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'orcaella-2001',\n          opacity: 0,\n        },\n        {\n          layer: 'orcaella-2008',\n          opacity: 0,\n        },\n        {\n          layer: 'orcaella-2011',\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: 'section-3',\n      title: 'Threats from industrial expansion',\n      // image: './path/to/image/source.png',\n      description:\n        'About 20 years ago, wood and coal companies started operating around Balikpapan Bay, increasing industrial activity and traffic of coal pontoons and oil tankers.<br/><br/> Those ships cause noise pollution, which disrupts the navigation of Irrawaddy dolphins who rely on sonar systems to know where they’re going. It is not uncommon for Irrawaddy dolphins to crash into ships.',\n      location: {\n        center: [116.84909, -1.14256],\n        zoom: 9,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 1,\n        },\n      ],\n    },\n    {\n      id: 'section-3a',\n      title: '',\n      // image: './path/to/image/source.png',\n      description:\n        'According to data from <a href=\"https://www.marinetraffic.com/\">MarineTraffic</a>, a global ship tracking company, more than 350,000 ships passed through the Balikpapan Bay area between June 2019 and July 2020. More than 35 percent of that traffic was from vessels categorized as tankers or cargo ships, whose lengths reach 200 meters. <br/><br/>“The intensity of the traffic in Balikpapan Bay is the biggest threat to the Irrawaddy dolphin,” said Hery Seputro, a coordinator for the Agency for Food, Agriculture and Fishery in Klandasan, Balikpapan.',\n      location: {\n        center: [116.84909, -1.14256],\n        zoom: 9,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 1,\n        },\n        {\n          layer: 'tumpahanbppall',\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 1,\n        },\n      ],\n    },\n    // {\n    //   id: 'section-4',\n    //   title: '',\n    //   // image: './path/to/image/source.png',\n    //   description:\n    //     'Sebab di Teluk Balikpapan, semua alur dari lokal sampai internasional melintasi perairan itu, yakni dari nelayan lokal, akses antar wilayah, hingga bongkar muat batu bara dan minyak dengan kapal-kapal asing. “Ditambah lagi rencana ibu kota negara nanti. Lalu lintas lautnya kalau enggak diatasi benar-benar, bakal bahaya semua biota laut,” tutur Hery.',\n    //   location: {\n    //     center: [116.84909, -1.14256],\n    //     zoom: 9.5,\n    //     pitch: 0,\n    //     bearing: 0.0,\n    //   },\n    //   onChapterEnter: [\n    //     {\n    //       layer: 'pesut-teluk-bpp-2015',\n    //       opacity: 1,\n    //     },\n    //     {\n    //       layer: 'titikkapal',\n    //       opacity: 1,\n    //     },\n    //     {\n    //       layer: 'tumpahanbppall',\n    //       opacity: 0,\n    //     },\n    //   ],\n    //   onChapterExit: [\n    //     {\n    //       layer: 'pesut-teluk-bpp-2015',\n    //       opacity: 1,\n    //     },\n    //     {\n    //       layer: 'titikkapal',\n    //       opacity: 1,\n    //     },\n    //   ],\n    // },\n    {\n      id: 'section-4a',\n      title: 'Oil spill',\n      // image: './path/to/image/source.png',\n      description:\n        'The PT Pertamina oil spill that occurred on March 31, 2018, threatened the entire Balikpapan Bay ecosystem.<br/><br/>The oil spread across around 20,000 hectares of water in the bay, according to satellite data from <a href=\"https://spbn.pusfatja.lapan.go.id/people/profile/minyak_tumpah/?limit=100&offset=0\">LAPAN</a>.',\n      svg: true,\n      location: {\n        center: [116.84909, -1.14256],\n        zoom: 9.5,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 0,\n        },\n        {\n          layer: 'tumpahanbppall',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 0,\n        },\n        {\n          layer: 'tumpahanbppall',\n          opacity: 1,\n        },\n      ],\n    },\n    {\n      id: 'section-5a',\n      title: \"Indonesia's new capital: a burgeoning threat\",\n      // image: './path/to/image/source.png',\n      description:\n        'Indonesia’s new capital, which will cover an area of <a href=\"https://twitter.com/BappenasRI/status/1222009308310728706/photo/1\">more than 250 hectares</a> very close to Irrawaddy dolphin habitats, poses a new threat to the dolphin population in the Balikpapan Bay.',\n      svg: true,\n      location: {\n        center: [116.9, -1],\n        zoom: 9,\n        pitch: 0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'ikn',\n          opacity: 1,\n        },\n        {\n          layer: 'titikkapal',\n          opacity: 0,\n        },\n        {\n          layer: 'tumpahanbppall',\n          opacity: 0,\n        },\n        {\n          layer: 'labels',\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 1,\n        },\n        {\n          layer: 'ikn',\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: 'mahakam-1',\n      title: 'Mahakam River',\n      // image: './path/to/image/source.png',\n      description:\n        'The Mahakam River is home to around 80 Irrawaddy dolphins, based on data from RASI collected in 2018-2019.  Kreb also found based on DNA analysis that despite their similarities, Irrawaddy dolphins in the Balikpapan Bay are not the same as those that live on the Mahakam River.',\n      location: {\n        center: [116.3991, -0.10803],\n        zoom: 7.88,\n        pitch: 0.0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 0,\n        },\n        {\n          layer: 'mahakam1819',\n          opacity: 1,\n        },\n        {\n          layer: 'mahakamair',\n          opacity: 0,\n        },\n        {\n          layer: 'batas',\n          opacity: 0.5,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 0,\n        },\n        {\n          layer: 'mahakam1819',\n          opacity: 0,\n        },\n        {\n          layer: 'batas',\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: 'mahakam-2',\n      title: '',\n      // image: './path/to/image/source.png',\n      description:\n        'Between 1995 and June 2019, 103 Irrawaddy dolphins were found dead in the river, with an average of four deaths recorded each year. The worst decline in the last 20 years was in 2018, when 11 dolphins were found dead. In 2019, the number of recorded deaths dropped to five.',\n      location: {\n        center: [116.2991, -0.10803],\n        zoom: 8.44,\n        pitch: 0.0,\n        bearing: 0.0,\n      },\n      onChapterEnter: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 0,\n        },\n        {\n          layer: 'mahakamair',\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: 'pesut-teluk-bpp-2015',\n          opacity: 0,\n        },\n        {\n          layer: 'mahakam1819',\n          opacity: 0,\n        },\n      ],\n    },\n  ],\n};\n///START SCRIPT\n\nvar layerTypes = {\n  fill: ['fill-opacity'],\n  line: ['line-opacity'],\n  circle: ['circle-opacity', 'circle-stroke-opacity'],\n  symbol: ['icon-opacity', 'text-opacity'],\n  raster: ['raster-opacity'],\n  'fill-extrusion': ['fill-extrusion-opacity'],\n};\n\nvar alignments = {\n  left: 'lefty',\n  center: 'centered',\n  right: 'righty',\n};\n\nfunction getLayerPaintType(layer) {\n  var layerType = map.getLayer(layer).type;\n  return layerTypes[layerType];\n}\n\nfunction setLayerOpacity(layer) {\n  var paintProps = getLayerPaintType(layer.layer);\n  paintProps.forEach(function(prop) {\n    map.setPaintProperty(layer.layer, prop, layer.opacity);\n  });\n}\n\nvar story = document.getElementById('story');\nvar features = document.createElement('div');\nfeatures.classList.add(alignments[config.alignment]);\nfeatures.setAttribute('id', 'features');\n\nvar header = document.createElement('div');\n\nif (config.title) {\n  var titleText = document.createElement('h1');\n  titleText.innerText = config.title;\n  header.appendChild(titleText);\n}\n\nif (config.subtitle) {\n  var subtitleText = document.createElement('h2');\n  subtitleText.innerText = config.subtitle;\n  header.appendChild(subtitleText);\n}\n\nif (config.byline) {\n  var bylineText = document.createElement('p');\n  bylineText.innerText = config.byline;\n  header.appendChild(bylineText);\n}\n\nif (header.innerText.length > 0) {\n  header.classList.add(config.theme);\n  header.setAttribute('id', 'header');\n  story.appendChild(header);\n}\n\nconfig.chapters.forEach((record, idx) => {\n  var container = document.createElement('div');\n  var chapter = document.createElement('div');\n\n  if (record.title) {\n    var title = document.createElement('h3');\n    title.innerText = record.title;\n    chapter.appendChild(title);\n  }\n\n  if (record.image) {\n    var image = new Image();\n    image.src = record.image;\n    chapter.appendChild(image);\n  }\n\n  if (record.description) {\n    var story = document.createElement('p');\n    story.innerHTML = record.description;\n    chapter.appendChild(story);\n  }\n\n  if (record.svg) {\n    var svg = document.createElement('div');\n    svg.setAttribute('id', 'svg-' + record.id);\n    chapter.appendChild(svg);\n  }\n  if (record.chart) {\n    var chart = document.createElement('div');\n    chart.setAttribute('id', 'chart-' + record.id);\n    chart.innerHTML +=\n      '<object type=\"text/html\" data=\"bubble-chart.html\" ></object>';\n    chapter.appendChild(chart);\n  }\n\n  container.setAttribute('id', record.id);\n  container.classList.add('step');\n  if (idx === 0) {\n    container.classList.add('active');\n  }\n\n  chapter.classList.add(config.theme);\n  container.appendChild(chapter);\n  features.appendChild(container);\n});\n\nstory.appendChild(features);\n\nvar footer = document.createElement('div');\n\nif (config.footer) {\n  var footerText = document.createElement('p');\n  footerText.innerHTML = config.footer;\n  footer.appendChild(footerText);\n}\n\nif (footer.innerText.length > 0) {\n  footer.classList.add(config.theme);\n  footer.setAttribute('id', 'footer');\n  story.appendChild(footer);\n}\n\nmapboxgl.accessToken = config.accessToken;\n\nconst transformRequest = url => {\n  const hasQuery = url.indexOf('?') !== -1;\n  const suffix = hasQuery\n    ? '&pluginName=journalismScrollytelling'\n    : '?pluginName=journalismScrollytelling';\n  return {\n    url: url + suffix,\n  };\n};\n\nvar map = new mapboxgl.Map({\n  container: 'map-scrolly',\n  style: config.style,\n  center: config.chapters[0].location.center,\n  zoom: config.chapters[0].location.zoom,\n  bearing: config.chapters[0].location.bearing,\n  pitch: config.chapters[0].location.pitch,\n  scrollZoom: false,\n  transformRequest: transformRequest,\n});\n\nvar marker = new mapboxgl.Marker();\nif (config.showMarkers) {\n  marker.setLngLat(config.chapters[0].location.center).addTo(map);\n}\n\n// instantiate the scrollama\nvar scroller = scrollama();\n\nmap.on('load', function() {\n  // setup the instance, pass callback functions\n  scroller\n    .setup({\n      step: '.step',\n      offset: 0.5,\n      progress: true,\n    })\n    .onStepEnter(response => {\n      var chapter = config.chapters.find(\n        chap => chap.id === response.element.id\n      );\n      response.element.classList.add('active');\n      map.flyTo(chapter.location);\n      if (config.showMarkers) {\n        marker.setLngLat(chapter.location.center);\n      }\n      if (chapter.onChapterEnter.length > 0) {\n        chapter.onChapterEnter.forEach(setLayerOpacity);\n      }\n    })\n    .onStepExit(response => {\n      var chapter = config.chapters.find(\n        chap => chap.id === response.element.id\n      );\n      response.element.classList.remove('active');\n      if (chapter.onChapterExit.length > 0) {\n        chapter.onChapterExit.forEach(setLayerOpacity);\n      }\n    });\n});\n\n// setup resize event\nwindow.addEventListener('resize', scroller.resize);\n","'use strict';\n\n// We depend on intersection-observer enough that it should just be assumed as necessary\nrequire('intersection-observer');\n"],"sourceRoot":""}