(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"z+Ii":function(t,e,i){"use strict";i.r(e);var s=function(t){return new Promise((e,i)=>{var s=document.createElement("script");s.src=t,s.async=!0,s.onload=e,s.onerror=i,document.body.appendChild(s)})};var n=function(t,e){return t instanceof Node||t instanceof Window?[t]:Array.prototype.slice.call("string"==typeof t?(e||document).querySelectorAll(t):t||[])},r=0;e.default=class{constructor(){var{adFields:t={adUnit:"/5805113/basic",dimensions:[300,250]},globalMappings:e={banner:[[[768,130],[[728,90]]]]},attributePrefix:i="dv-gpt-",gptSrc:s="https://www.googletagservices.com/tag/js/gpt.js",idPrefix:n="dv-gpt-",selector:r=".dv-gpt-ad",targetingKey:o="tribpedia",targetingValue:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.adFields=t,this.globalMappings=e,this.attributePrefix=i,this.gptSrc=s,this.idPrefix=n,this.selector=r,this.targetingKey=o,this.targetingValue=a,this.initialized=!1,this.slots=null,this.createAds=this.createAds.bind(this),this.onIntersection=this.onIntersection.bind(this),this.setupService=this.setupService.bind(this)}init(){if(!this.initialized){this.elements=n(this.selector),this.count=this.elements.length;this.observer=new IntersectionObserver(this.onIntersection,{rootMargin:"500px 0px",threshold:.01}),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],s(this.gptSrc).then(()=>{window.googletag.cmd.push(this.setupService,this.createAds),this.initialized=!0})}}setupService(){window.googletag.cmd.push(()=>{var t=window.googletag.pubads();this.targetingKey&&this.targetingValue&&t.setTargeting(this.targetingKey,this.targetingValue),t.disableInitialLoad(),window.googletag.enableServices()})}createAds(){var{adUnit:t,dimensions:e}=this.adFields,{banner:i}=this.globalMappings;this.elements.forEach(s=>{var n,o,a=function(t,e){var i=function(t){var e={};if(!t||1!==t.nodeType)return e;var i=t.attributes;if(0===i.length)return e;for(var s=0;s<i.length;s++)e[i[s].name]=i[s].value;return e}(t),s={};return Object.keys(i).forEach((function(t){if(t.substr(0,e.length)===e){var n=i[t],r=t.slice(e.length).replace(/[-_]+(\w?)/g,(t,e)=>e.toUpperCase());s[r]=n}})),s}(s,this.attributePrefix),g=Object.assign({},{adUnit:t,dimensions:e},a),d=(n=this.idPrefix,o=++r+"",n?n+o:o);s.setAttribute("id",d);var l=window.googletag.defineSlot(g.adUnit,g.dimensions,d);l.defineSizeMapping(i),g.targetingKey&&g.targetingValue&&l.setTargeting(g.targetingKey,g.targetingValue),l.setCollapseEmptyDiv(!0),l.addService(window.googletag.pubads()),window.googletag.display(d),s.__slot__=l,this.observer.observe(s)})}onIntersection(t){t.forEach(t=>{if(t.isIntersecting){var e=t.target;this.count-=1,this.observer.unobserve(e),window.googletag.pubads().refresh([e.__slot__]),this.count>0||this.observer.disconnect()}})}}}}]);
//# sourceMappingURL=ads.f652939abc.mjs.map