{"version":3,"sources":["webpack:///./app/scripts/packs/callWaffle.js","webpack:///./config/polyfills/classlist.js","webpack:///./config/legacy-polyfills.js"],"names":["containerChart","d3","pesutDeaths","data","resize","html","frameWidth","node","offsetWidth","width","height","$_selector","$_data","$_label","$_cellSize","$_cellGap","$_rows","$_columns","$_rounded","$_keys","$_useWidth","defaults","generatedWaffleChart","_obj","size","rows","columns","undefined","gap","rounded","formattedData","domain","value","length","total","d","forcedWidth","selector","getBoundingClientRect","Math","floor","squareVal","forEach","i","units","Array","join","split","map","push","groupIndex","red","interpolate","range","label","append","attr","text","legendItem","selectAll","enter","legendIcon","style","item","col","row","round","drawWaffleChart","arguments","useWidth","window","addEventListener","_","debounce","self","document","createElement","createElementNS","view","elemCtrProto","Element","objCtr","Object","strTrim","String","trim","this","replace","arrIndexOf","indexOf","len","DOMEx","type","message","name","code","DOMException","checkTokenAndGetIndex","classList","token","test","call","ClassList","elem","trimmedClasses","getAttribute","classes","_updateClassName","setAttribute","toString","classListProto","classListGetter","Error","contains","add","tokens","l","updated","remove","index","splice","toggle","force","result","method","replacement_token","defineProperty","classListPropDesc","get","enumerable","configurable","ex","number","__defineGetter__","testElement","createMethod","original","DOMTokenList","prototype","_toggle","slice","apply","Promise","require","default","assign"],"mappings":"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","file":"callWaffle.77f79007c8.js","sourcesContent":["/* eslint-disable no-unused-vars */\nimport * as d3 from 'd3';\nimport d3Tip from 'd3-tip';\n\n// import * as tip from 'd3-tip';\nimport _ from 'lodash';\n\n// main code for feature graphics\n// a reference to the default graphic container, change if needed\nconst containerChart = d3.select('.waffle-chart');\n\n// a helper function to clear the container of its contents\nconst clearContainer = () => containerChart.html('');\n\n// a helper function to grab the container's width\nconst getFrameWidth = () => containerChart.node().offsetWidth;\n\n// var dataCsv = d3.csv('../../data.csv');\n// console.log(dataCsv);\n\nimport data from '../../../data/data.json';\n// import geodata from '../../../data/mahakam_clipped.json';\n// import geodata_2 from '../../../data/telukbppnew.json';\n// import bppRect from '../../../data/rectbpp.json';\n// import mahakamRect from '../../../data/rectmahakam.json';\nvar pesutDeaths = data['pesutdeaths'];\n\nfunction resize() {\n  clearContainer();\n  const frameWidth = getFrameWidth();\n  var breakPoint = 400;\n  const isMobile = frameWidth < breakPoint;\n\n  var margin = { top: 20, right: 0, bottom: 20, left: 0 };\n  var width = frameWidth - margin.left - margin.right;\n  var height = 350 - margin.top - margin.bottom;\n\n  var WaffleChart = function() {\n    var $_selector,\n      $_data,\n      $_label,\n      $_cellSize,\n      $_cellGap,\n      $_rows,\n      $_columns,\n      $_rounded,\n      $_keys,\n      $_useWidth;\n\n    var defaults = {\n      size: 6,\n      rows: 50,\n      columns: 100,\n      rounded: false,\n      gap: 2,\n    };\n\n    function generatedWaffleChart() {\n      $_keys = d3.keys($_data[0]);\n\n      var obj = {\n        selector: $_selector,\n        data: $_data,\n        label: $_label,\n        size: $_cellSize,\n        gap: $_cellGap,\n        rows: $_rows,\n        columns: $_columns,\n        rounded: $_rounded,\n      };\n\n      drawWaffleChart(obj);\n    }\n\n    function drawWaffleChart(_obj) {\n      if (!_obj.size) {\n        _obj.size = defaults.size;\n      }\n      if (!_obj.rows) {\n        _obj.rows = defaults.rows;\n      }\n      if (!_obj.columns) {\n        _obj.columns = defaults.columns;\n      }\n      if (_obj.gap === undefined) {\n        _obj.gap = defaults.gap;\n      }\n      if (_obj.rounded === undefined) {\n        _obj.columns = defaults.rounded;\n      }\n\n      var formattedData = [];\n      var domain = [];\n      var value = $_keys[$_keys.length - 1];\n      var total = d3.sum(_obj.data, function(d) {\n        return d[value];\n      });\n\n      if ($_useWidth) {\n        var forcedWidth = d3\n          .select(_obj.selector)\n          .node()\n          .getBoundingClientRect().width;\n        _obj.columns = Math.floor(forcedWidth / (_obj.size + _obj.gap));\n      }\n\n      var squareVal = total / (_obj.rows * _obj.columns);\n\n      _obj.data.forEach(function(d, i) {\n        d[value] = +d[value];\n        d.units = Math.floor(d[value] / squareVal);\n        Array(d.units + 1)\n          .join(1)\n          .split('')\n          .map(function() {\n            formattedData.push({\n              squareVal: squareVal,\n              units: d.units,\n              value: d[value],\n              groupIndex: i,\n            });\n          });\n        domain.push(d[$_keys[0]]);\n      });\n\n      var red = '#CE2A23';\n\n      var color = d3\n        .scaleLinear()\n        .domain([1, _obj.data.length - 1])\n        .interpolate(d3.interpolateRgb)\n        .range(['#555', '#EEE']);\n\n      // add label\n\n      if (_obj.label) {\n        d3.select(_obj.selector)\n          .append('div')\n          .attr('class', 'label')\n          .text(_obj.label);\n      }\n\n      // add legend\n\n      var legend = d3\n        .select($_selector)\n        .append('div')\n        .attr('class', 'legend');\n\n      var legendItem = legend.selectAll('div').data(_obj.data);\n\n      legendItem\n        .enter()\n        .append('div')\n        .attr('class', function(d, i) {\n          return 'legend_item legend_item_' + (i + 1);\n        });\n\n      var legendIcon = legendItem\n        .append('div')\n        .attr('class', 'legend_item_icon')\n        .style('background-color', function(d, i) {\n          if (i === 0) {\n            return red;\n          } else if (i === 1) {\n            return red;\n          } else if (i === 2) {\n            return red;\n          } else if (i === 3) {\n            return red;\n          } else if (i === 4) {\n            return red;\n          } else if (i === 5) {\n            return red;\n          } else if (i === 6) {\n            return red;\n          } else if (i === 7) {\n            return red;\n          } else if (i === 8) {\n            return red;\n          }\n        });\n\n      if (_obj.rounded) {\n        legendIcon.style('border-radius', '50%');\n      }\n\n      legendItem\n        .append('span')\n        .attr('class', 'legend_item_text')\n        .text(function(d) {\n          return d[$_keys[0]];\n        });\n\n      // set up the dimensions\n\n      // var width = _obj.size * _obj.columns + _obj.columns * _obj.gap - _obj.gap;\n      // var height = _obj.size * _obj.rows + _obj.rows * _obj.gap - _obj.gap;\n\n      if ($_useWidth) {\n        width = d3\n          .select(_obj.selector)\n          .node()\n          .getBoundingClientRect().width;\n      }\n\n      var svg = d3\n        .select(_obj.selector)\n        .append('svg')\n        .attr('class', 'waffle')\n        .attr('width', width)\n        .attr('height', height);\n\n      var g = svg.append('g').attr('transform', 'translate(0,0)');\n\n      // insert dem items\n\n      var item = g.selectAll('.unit').data(formattedData);\n\n      item\n        .enter()\n        .append('rect')\n        .attr('class', 'unit')\n        .attr('width', _obj.size)\n        .attr('height', _obj.size)\n        .attr('fill', function(d) {\n          if (d.groupIndex === 0) {\n            return '#00A5E3';\n          } else if (d.groupIndex === 1) {\n            return '#ff5c77';\n          } else if (d.groupIndex === 2) {\n            return '#c05780';\n          } else if (d.groupIndex === 3) {\n            return '#00cdac';\n          } else if (d.groupIndex === 4) {\n            return '#fc6238';\n          } else if (d.groupIndex === 5) {\n            return '#8dd7bf';\n          } else if (d.groupIndex === 6) {\n            return '#ffd872';\n          } else if (d.groupIndex === 7) {\n            return '#ff828b';\n          } else if (d.groupIndex === 8) {\n            return '#cccccc';\n          }\n        })\n        .attr('x', function(d, i) {\n          var col = Math.floor(i / _obj.rows);\n          return col * _obj.size + col * _obj.gap;\n        })\n        .attr('y', function(d, i) {\n          var row = i % _obj.rows;\n          return (\n            _obj.rows * (_obj.size + _obj.gap) -\n            (row * _obj.size + row * _obj.gap) -\n            _obj.size -\n            _obj.gap\n          );\n        })\n        .append('title')\n        .text(function(d, i) {\n          return (\n            _obj.data[d.groupIndex][$_keys[0]] +\n            ': ' +\n            Math.round((d.units / formattedData.length) * 100) +\n            '%'\n          );\n        });\n\n      if (_obj.rounded) {\n        item.attr('rx', _obj.size / 2).attr('ry', _obj.size / 2);\n      }\n    }\n\n    generatedWaffleChart.selector = function(value) {\n      if (!arguments.length) {\n        return $_selector;\n      }\n      $_selector = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.data = function(value) {\n      if (!arguments.length) {\n        return $_data;\n      }\n      $_data = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.useWidth = function(value) {\n      if (!arguments.length) {\n        return $_useWidth;\n      }\n      $_useWidth = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.label = function(value) {\n      if (!arguments.length) {\n        return $_label;\n      }\n      $_label = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.size = function(value) {\n      if (!arguments.length) {\n        return $_cellSize;\n      }\n      $_cellSize = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.gap = function(value) {\n      if (!arguments.length) {\n        return $_cellGap;\n      }\n      $_cellGap = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.rows = function(value) {\n      if (!arguments.length) {\n        return $_rows;\n      }\n      $_rows = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.columns = function(value) {\n      if (!arguments.length) {\n        return $_columns;\n      }\n      $_columns = value;\n      return generatedWaffleChart;\n    };\n\n    generatedWaffleChart.rounded = function(value) {\n      if (!arguments.length) {\n        return $_rounded;\n      }\n      $_rounded = value;\n      return generatedWaffleChart;\n    };\n\n    return generatedWaffleChart;\n  };\n\n  var waffle = new WaffleChart()\n    .selector('.waffle-chart')\n    .data(pesutDeaths)\n    .useWidth(false)\n    .label(\"Value of producers' sales in 2013, in thousands of dollars\")\n    .size(10)\n    .gap(2)\n    .rows(20)\n    .columns(50)\n    .rounded(true)();\n}\n\n// call resize on load\n\nresize();\nwindow.addEventListener('resize', _.debounce(resize, 200));\n","/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.2.20171210\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif ('document' in self) {\n  // Full polyfill for browsers with no classList support\n  // Including IE < Edge missing SVGElement.classList\n  if (\n    !('classList' in document.createElement('_')) ||\n    (document.createElementNS &&\n      !(\n        'classList' in\n        document.createElementNS('http://www.w3.org/2000/svg', 'g')\n      ))\n  ) {\n    (function(view) {\n      'use strict';\n\n      if (!('Element' in view)) return;\n\n      var classListProp = 'classList',\n        protoProp = 'prototype',\n        elemCtrProto = view.Element[protoProp],\n        objCtr = Object,\n        strTrim =\n          String[protoProp].trim ||\n          function() {\n            return this.replace(/^\\s+|\\s+$/g, '');\n          },\n        arrIndexOf =\n          Array[protoProp].indexOf ||\n          function(item) {\n            var i = 0,\n              len = this.length;\n            for (; i < len; i++) {\n              if (i in this && this[i] === item) {\n                return i;\n              }\n            }\n            return -1;\n          },\n        // Vendors: please allow content code to instantiate DOMExceptions\n        DOMEx = function(type, message) {\n          this.name = type;\n          this.code = DOMException[type];\n          this.message = message;\n        },\n        checkTokenAndGetIndex = function(classList, token) {\n          if (token === '') {\n            throw new DOMEx('SYNTAX_ERR', 'The token must not be empty.');\n          }\n          if (/\\s/.test(token)) {\n            throw new DOMEx(\n              'INVALID_CHARACTER_ERR',\n              'The token must not contain space characters.'\n            );\n          }\n          return arrIndexOf.call(classList, token);\n        },\n        ClassList = function(elem) {\n          var trimmedClasses = strTrim.call(elem.getAttribute('class') || ''),\n            classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : [],\n            i = 0,\n            len = classes.length;\n          for (; i < len; i++) {\n            this.push(classes[i]);\n          }\n          this._updateClassName = function() {\n            elem.setAttribute('class', this.toString());\n          };\n        },\n        classListProto = (ClassList[protoProp] = []),\n        classListGetter = function() {\n          return new ClassList(this);\n        };\n      // Most DOMException implementations don't allow calling DOMException's toString()\n      // on non-DOMExceptions. Error's toString() is sufficient here.\n      DOMEx[protoProp] = Error[protoProp];\n      classListProto.item = function(i) {\n        return this[i] || null;\n      };\n      classListProto.contains = function(token) {\n        return ~checkTokenAndGetIndex(this, token + '');\n      };\n      classListProto.add = function() {\n        var tokens = arguments,\n          i = 0,\n          l = tokens.length,\n          token,\n          updated = false;\n        do {\n          token = tokens[i] + '';\n          if (!~checkTokenAndGetIndex(this, token)) {\n            this.push(token);\n            updated = true;\n          }\n        } while (++i < l);\n\n        if (updated) {\n          this._updateClassName();\n        }\n      };\n      classListProto.remove = function() {\n        var tokens = arguments,\n          i = 0,\n          l = tokens.length,\n          token,\n          updated = false,\n          index;\n        do {\n          token = tokens[i] + '';\n          index = checkTokenAndGetIndex(this, token);\n          while (~index) {\n            this.splice(index, 1);\n            updated = true;\n            index = checkTokenAndGetIndex(this, token);\n          }\n        } while (++i < l);\n\n        if (updated) {\n          this._updateClassName();\n        }\n      };\n      classListProto.toggle = function(token, force) {\n        var result = this.contains(token),\n          method = result\n            ? force !== true && 'remove'\n            : force !== false && 'add';\n\n        if (method) {\n          this[method](token);\n        }\n\n        if (force === true || force === false) {\n          return force;\n        } else {\n          return !result;\n        }\n      };\n      classListProto.replace = function(token, replacement_token) {\n        var index = checkTokenAndGetIndex(token + '');\n        if (~index) {\n          this.splice(index, 1, replacement_token);\n          this._updateClassName();\n        }\n      };\n      classListProto.toString = function() {\n        return this.join(' ');\n      };\n\n      if (objCtr.defineProperty) {\n        var classListPropDesc = {\n          get: classListGetter,\n          enumerable: true,\n          configurable: true,\n        };\n        try {\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n        } catch (ex) {\n          // IE 8 doesn't support enumerable:true\n          // adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n          // modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n          if (ex.number === undefined || ex.number === -0x7ff5ec54) {\n            classListPropDesc.enumerable = false;\n            objCtr.defineProperty(\n              elemCtrProto,\n              classListProp,\n              classListPropDesc\n            );\n          }\n        }\n      } else if (objCtr[protoProp].__defineGetter__) {\n        elemCtrProto.__defineGetter__(classListProp, classListGetter);\n      }\n    })(self);\n  }\n\n  // There is full or partial native classList support, so just check if we need\n  // to normalize the add/remove and toggle APIs.\n\n  (function() {\n    'use strict';\n\n    var testElement = document.createElement('_');\n\n    testElement.classList.add('c1', 'c2');\n\n    // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n    // classList.remove exist but support only one argument at a time.\n    if (!testElement.classList.contains('c2')) {\n      var createMethod = function(method) {\n        var original = DOMTokenList.prototype[method];\n\n        DOMTokenList.prototype[method] = function(token) {\n          var i,\n            len = arguments.length;\n\n          for (i = 0; i < len; i++) {\n            token = arguments[i];\n            original.call(this, token);\n          }\n        };\n      };\n      createMethod('add');\n      createMethod('remove');\n    }\n\n    testElement.classList.toggle('c3', false);\n\n    // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n    // support the second argument.\n    if (testElement.classList.contains('c3')) {\n      var _toggle = DOMTokenList.prototype.toggle;\n\n      DOMTokenList.prototype.toggle = function(token, force) {\n        if (1 in arguments && !this.contains(token) === !force) {\n          return force;\n        } else {\n          return _toggle.call(this, token);\n        }\n      };\n    }\n\n    // replace() polyfill\n    if (!('replace' in document.createElement('_').classList)) {\n      DOMTokenList.prototype.replace = function(token, replacement_token) {\n        var tokens = this.toString().split(' '),\n          index = tokens.indexOf(token + '');\n        if (~index) {\n          tokens = tokens.slice(index);\n          this.remove.apply(this, tokens);\n          this.add(replacement_token);\n          this.add.apply(this, tokens.slice(1));\n        }\n      };\n    }\n\n    testElement = null;\n  })();\n}\n","'use strict';\n\nif (typeof Promise === 'undefined') {\n  window.Promise = require('promise-polyfill').default;\n}\n\n// Only polyfill fetch() if we're in a browser\nif (typeof window !== 'undefined') {\n  require('whatwg-fetch');\n}\n\n// Will use the native implementation if it's not bad\nObject.assign = require('object-assign');\n\n// Support for...of (a commonly used syntax feature that requires Symbols)\nrequire('core-js/es6/symbol');\n// support all of Map()\nrequire('core-js/es6/map');\n// support all of Set()\nrequire('core-js/es6/set');\n// Support iterable spread (...Set, ...Map)\nrequire('core-js/fn/array/from');\n\n// This is available locally because everyone who made one doesn't understand\n// npm, apparently\nrequire('./polyfills/classlist.js');\n\n// We depend on intersection-observer enough that it should just be assumed as necessary\nrequire('intersection-observer');\n"],"sourceRoot":""}